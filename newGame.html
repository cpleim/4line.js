<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <title>4Line - Nueva Partida</title>
    <link rel="shortcut icon" href="assets/4LineBanner.gif" />
    <script src="https://code.jquery.com/jquery-3.3.1.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/meyer-reset/2.0/reset.min.css">
    <script src="https://unpkg.com/popmotion/dist/popmotion.global.min.js"></script>
    <link rel='stylesheet prefetch' href='css/ewxggx.css'>
    <link rel="stylesheet" href="css/style.css">
    <script type="text/javascript">
        var gamesSessions = [];
        var inUseGameIDs = [];
        var player1Name, player2Name, gameCode, generatedGameID;
        $(document).ready(function() {
            $("#newGame").click(function() {
                if ($("#jugador1").val() == "" || $("#jugador2").val() == "") {
                    alert("Ingrese los nombres de los dos jugadores!");
                    return;
                }
                gamesSessions.push({
                    currentGameSession: {
                        gameID: Math.random().toString(36).slice(2),
                        setupData: {
                            player1Name: $("#jugador1").val(),
                            player2Name: $("#jugador2").val()
                        }
                    }
                });
                generatedGameID = gamesSessions[0].currentGameSession.gameID;
                inUseGameIDs.push(generatedGameID);
                localStorage.setItem("4line_games_sessions_ID:" + generatedGameID, JSON.stringify(gamesSessions));
                console.log("[4Line]--> STORED IN LOCALSTORAGE!");
                //Para traer las sesiones de juego desde el local storage
                //var storedSessions = JSON.parse(localStorage.getItem("4line_games_sessions"));
            });

        });

        $(document).ready(function() {
            $("#resumeGame").click(function() {
                gameCode = $("#resumeGameID").val();
                if ($("#resumeGameID").val() == "") {
                    alert("Ingresa el código de juego para continuar!");
                    return;
                }
                for (var i = 0; i < gamesSessions.length; i++) {
                    if (gameCode == gamesSessions[i].currentGameSession.gameID) {
                        alert("Found it!");
                        console.log("GAME ID: " + gamesSessions[i].currentGameSession.gameID);
                        console.log("PLAYER 1 NAME: " + gamesSessions[i].currentGameSession.setupData.player1Name);
                        console.log("PLAYER 2 NAME: " + gamesSessions[i].currentGameSession.setupData.player2Name);
                        return;
                    }
                }
            });
        });
    </script>
</head>

<body>
    <!--
    <script src='https://rawgit.com/juliangarnier/anime/master/anime.min.js'></script>
    <script src="js/bgGenerator.js"></script>
-->
    <div id='contenedor_banner' align="center">
        <img src="assets/4LineBanner.gif" width="600" height="200">
    </div>
    <div id="contenedor_controles" align="center">
        <p>Ingrese los nombres de los jugadores</p>
        <br>Jugador 1: <input type="text" id="jugador1"></input>
        </br>
        <br>Jugador 2: <input type="text" id="jugador2"></input>
        </br>
        <br><button id="newGame">Comenzar nueva partida!</button></br>
        <p></p>
        <br>Deseas continuar tu partida anterior?</br>
        <br>Ingresa tu código de juego!</br>
        <br>Codigo de juego: <input type="text" id="resumeGameID"></input>
        </br>
        <br><button id="resumeGame">Continuar juego</button></br>
    </div>
    <div id='contenedor_login'>
        <img src="assets/divLogin.png" width="400" height="500">
    </div>
</body>

</html>